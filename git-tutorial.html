<!DOCTYPE html>
<html>
  <head>
    <title>Presentation: Git tutorial by Eric Joanis</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.2.1/reveal.min.css"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.2.1/theme/white.min.css"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.2.1/plugin/highlight/monokai.min.css"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      :root {
        --r-heading-text-transform: normal;
      }
      ul.no-bullets {
        list-style-type: none;
        margin: 0;
        padding: 0;
      }
      code {
        background-color: lightgray;
      }
    </style>
  </head>

  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <p>&nbsp;</p>
          <h1>An opinionated<br />Git tutorial</h1>
          <p>by Eric Joanis</p>
          <p class="r-stretch"></p>
          <p><small>&copy; 2025, National Research Council Canada</small></p>
        </section>
        <section>
          <h3>Motivation</h3>
          <div style="text-align: left">
            <p>OK, so we all know of Git, why this tutorial?</p>
            <p>Because:</p>
            <ul>
              <li>Git is complex</li>
              <li>Some are afraid of making mistakes</li>
              <li>Conflicts can be scary</li>
              <li>I'm picky about your Pull Requests</li>
              <li>It's not that hard if you have intuitions of how it works</li>
            </ul>
          </div>
        </section>
        <section>
          <h3>The basics</h3>
          <div style="text-align: left" class="r-fit-text">
            <p>You might want to:</p>
            <ul>
              <li>Get a local copy of a project.</li>
              <li>Make changes to it.</li>
              <li>Contribute these changes to the project.</li>
              <li>Retrieve changes others have made.</li>
            </ul>
          </div>
        </section>
        <section>
          <h3>The basics</h3>
          <div style="text-align: left" class="r-fit-text">
            <p>You might want to:</p>
            <ul style="margin-right: 15em; font-size: 100%">
              <li>Get a local copy of a project.</li>
              <p class="fragment">
                <code>git clone http://server/space/repo.git</code>
              </p>
              <li>Make changes to it.</li>
              <p class="fragment">
                Write and change code <br />
                <code>git add &lt;changed files></code> <br />
                <code>git commit</code>
              </p>
              <li>Contribute these changes to the project.</li>
              <p class="fragment">
                <code>git switch -c dev.myfeature</code> <br />
                <code>git push -u origin dev.myfeature</code>
              </p>
              <li>Retrieve changes others have made.</li>
              <p class="fragment">
                <code>git fetch</code> <br />
                <code>git rebase</code>
              </p>
            </ul>
            <p class="r-stretch"></p>
          </div>
        </section>
        <section>
          <h3>The basics, with a hint of controversy</h3>
          <div style="text-align: left" class="r-fit-text">
            <p><code>git clone https://server/space/repo.git</code></p>
            <p><code>git checkout -b dev.myfeature</code></p>
            <p>
              Work and commit stuff with <code>git add</code> and
              <code>git commit</code>
            </p>
            <p><code>git fetch</code> (please don't pull!)</p>
            <p><code>git rebase</code> (yes, please clean up your history!)</p>
            <p><code>git push</code> (usually to a dev branch, for a PR)</p>
            <p>Submit a Pull/Merge request</p>
          </div>
        </section>
        <section>
          <h3>A Git repo is a Directed Acyclic Graph</h3>
          <div style="text-align: left" class="r-fit-text">
            <p>A <b>commit</b> is:</p>
            <ul>
              <li>a <b>node</b> in the DAG</li>
              <li>with a <b>parent</b> (or several, or none)</li>
              <li>with a <b>complete snapshot</b> of the code base</li>
            </ul>
            <div style="text-align: center" class="mermaid">
              <pre>
               gitGraph
                commit
                commit
                branch dev.feature1
                commit
                commit
                checkout main
                commit
                branch dev.bug-fix2
                commit
                checkout main
                commit
                merge dev.feature1
                commit
              </pre>
            </div>
          </div>
        </section>
        <section>
          <h3>Isn't a commit a <i>change set</i>?</h3>
          <div style="text-align: left" class="r-fit-text">
            <small><pre>$ git show</pre></small>
            <img src="assets/git-show.png" alt="git show" />
          </div>
        </section>
        <section>
          <h3>Isn't a commit a <i>change set</i>?</h3>
          <div style="text-align: left" class="r-fit-text">
            <p>Pedantically speaking, no.</p>
            <p>
              The <i>diff</i> between a commit and its parent is the change set.
            </p>
            <p>
              When we rebase or cherry pick, we create a new commit from the
              same change set.
            </p>
            <p>&nbsp;</p>
            <p>Who cares? Good question!<br /></p>
            <img src="assets/git-loga.png" alt="git loga" />
          </div>
        </section>
        <section>
          <h3>Use a graph viewer</h3>
          <div style="text-align: left" class="r-fit-text">
            Any idea what's going on here?<br />
            <code>$ git log --oneline --decorate --all</code>
          </div>
          <img src="assets/git-log-oneline-long.png" alt="git log, no graph" />
        </section>
        <section>
          <h3>Use a graph viewer</h3>
          <img
            src="assets/git-logs-long.png"
            alt="git logs, showing the graph"
          />
        </section>
        <section>
          <h3>Use a graph viewer</h3>
          <div style="text-align: left" class="r-fit-text">
            <p>There are many Git graph viewers, pick one you like.</p>
            <ul>
              <li><code>git log --graph --oneline --decorate --all</code></li>
              <li>
                <code>tig --all</code>, &nbsp; <code>gitk --all</code>, &nbsp;
                <code>git-graph</code>, &nbsp; <code>serie</code>, &nbsp; etc.
              </li>
              <li>
                My favourite alias: <code>git loga</code> (output: see previous
                slide) <br />
                In my <code>~/.gitconfig</code>:
                <pre style="box-shadow: none; margin-left: 0">
[alias]
  logs = log --color --graph --date=short --date-order --format=logs
  loga = logs --all
[log]
  abbrevCommit = true
  decorate = true
[pretty]
  logs = %Cred%ad %Cgreen%h %Cblue%an%Cred%d %Creset%s</pre
                >
                <!--<img src="assets/git-loga.png" alt="git loga" />-->
              </li>
            </ul>
          </div>
        </section>
        <section>
          <h3>Branching and rebasing</h3>
          <div style="text-align: left">
            <p>Branching is cheap</p>
            <p>
              <code>git switch -c dev.something</code><br />
              <code>git commit -m "some commit"</code><br />
              <code>git fetch</code><br />
              <code>git rebase origin/main</code><br />
            </p>
            <p>&nbsp;</p>
            <p>Commit often, and clean up after</p>
            <p>
              Your <code>dev</code> branches are yours!<br />
              Rewrite them even if you've already pushed them.
            </p>
          </div>
        </section>
        <section>
          <h3>Commit a lot but clean up for the PR</h3>
          <div style="text-align: left">
            <p style="line-height: 0.7">
              <code style="font-size: 0.5em">
                git switch -c dev.branching<br />
                git commit -a -m'Starting drafting branching and rebasing'<br />
                git commit -a -m'Ooops, typo'<br />
                git commit -a -m'Make it clearer'<br />
                git commit -a -m"Why won't all the lines fit on the slide?"<br />
                git commit -a -m'Typo'
              </code>
            </p>
            <p><code>git rebase -i main</code></p>
            <img src="assets/rebase-i.png" alt="rebasing menu" />
            <img
              src="assets/history-rewrite.png"
              alt="long and clean versions of a feature branch"
            />
          </div>
        </section>
        <section>
          <h3>Commit a lot but clean up for the PR</h3>
          <div style="text-align: left">
            <p>
              <a href="https://render.com/blog/git-organized-a-better-git-flow"
                >Git Organized: A Better Git Workflow
                <br />
                <small>
                  <code
                    >https://render.com/blog/git-organized-a-better-git-flow</code
                  >
                </small>
              </a>
            </p>
            <p>TL;DR:</p>
            <ul>
              <li>Commit a lot</li>
              <li>reset with <code>git reset origin/main</code></li>
              <li>Create new, logically-grouped commits</li>
              <li>Submit a beautiful PR that makes Eric happy!</li>
            </ul>
          </div>
        </section>
        <section>
          <h3>Prefer fetch to pull; rebase to merge</h3>
          <div style="text-align: left">
            <p><code>git pull</code> three times while you work:</p>
            <img
              src="assets/git-pull-3times.png"
              alt="effect of doing pull three times"
            />
          </div>
        </section>
        <section>
          <h3>Prefer fetch to pull; rebase to merge</h3>
          <div style="text-align: left">
            <p>And merge the PR &nbsp; ☹️</p>
            <img
              src="assets/git-pull-3times-merged.png"
              alt="three pulls and a merge"
            />
          </div>
        </section>
        <section>
          <h3>Prefer fetch to pull; rebase to merge</h3>
          <div style="text-align: left">
            <p><code>git fetch</code> and <code>git rebase</code> instead:</p>
            <img
              src="assets/git-rebase-instead.png"
              alt="effect of rebasing instead"
            />
          </div>
        </section>
        <section>
          <h3>Prefer fetch to pull; rebase to merge</h3>
          <div style="text-align: left">
            <p>And merge the PR &nbsp; ☺️</p>
            <img
              src="assets/git-rebase-instead-merged.png"
              alt="three rebases and a merge"
            />
          </div>
        </section>
        <section>
          <h3>But don't rebase the official history</h3>
          <div style="text-align: left">
            <p>
              You might have heard warnings against rebasing published contents.
            </p>
            <p>
              Rebase your dev branches at will, delete them when you're done.
              They're yours, and they're disposable.
            </p>
            <p>
              But indeed, avoid rebasing <code>main</code> or branches that are
              part of the record, unless you really know what you're doing.
            </p>
          </div>
        </section>
        <section>
          <h3>Git commands for branches</h3>
          <div style="text-align: left">
            <table style="font-size: 0.65em; width: 100%">
              <colgroup>
                <col span="1" style="width: 71%" />
                <col span="1" style="width: 29%" />
              </colgroup>
              <tr>
                <td>
                  <code>git switch -c new_branch</code>
                  <br />
                  <code>git checkout -b new_branch</code>
                </td>
                <td>Create a branch and switch to it</td>
              </tr>
              <tr>
                <td><code>git branch new_branch commitish</code></td>
                <td>Create a branch from a specific commit(ish)</td>
              </tr>
              <tr>
                <td>
                  <code>git switch some_branch</code>
                  <br />
                  <code>git checkout some_branch</code>
                </td>
                <td>Switch to a branch</td>
              </tr>
              <tr>
                <td><code>git push -u origin my_br</code></td>
                <td>First push of a branch</td>
              </tr>
              <tr>
                <td><code>git push origin my_br</code></td>
                <td>Push branch updates</td>
              </tr>
              <tr>
                <td><code>git push --force-with-lease origin my_br</code></td>
                <td>Push after a rebase</td>
              </tr>
              <tr>
                <td>
                  <code>git branch -d old_branch</code>
                </td>
                <td>Delete a branch</td>
              </tr>
            </table>
            <p></p>
          </div>
        </section>
        <section>
          <h3>Git commands for rewriting history</h3>
          <div style="text-align: left">
            <table style="font-size: 0.65em; width: 100%">
              <colgroup>
                <col span="1" style="width: 61%" />
                <col span="1" style="width: 39%" />
              </colgroup>
              <tr>
                <td><code>git fetch</code></td>
                <td>Get new commits from origin</td>
              </tr>
              <tr>
                <td><code>git rebase origin/main</code></td>
                <td>Rebase my current branch onto origin/main</td>
              </tr>
              <tr>
                <td><code>git rebase -i commitish</code></td>
                <td>Interactive rebase</td>
              </tr>
              <tr>
                <td><code>git cherry-pick commitish</code></td>
                <td>"Steal" one commit from another branch</td>
              </tr>
            </table>
          </div>
        </section>
        <section>
          <h3>Key takeaways</h3>
          <div style="text-align: left">
            <p>Branches are cheap</p>
            <p>Rewrite your dev history</p>
            <p>Experiment!</p>
            <p>TODO...</p>
          </div>
        </section>
      </div>
    </div>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.2.1/reveal.min.js"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.2.1/plugin/highlight/highlight.min.js"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.2.1/plugin/notes/notes.min.js"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js-mermaid-plugin@11.4.1/plugin/mermaid/mermaid.js"></script>
    <script>
      // Reveal.initialize({plugins: [RevealNotes, RevealHighlight], });
      Reveal.initialize({
        plugins: [RevealNotes, RevealMermaid],
        hash: true,
        slideNumber: "c/t",
      });
    </script>
  </body>
</html>
